<section [ngClass]="['flex flex-col gap-3', className]" class="w-full max-w-sm">
  <label class="text-sm font-medium text-foreground">{{ label }}</label>

  <div class="flex items-center gap-2" *ngIf="variant === 'date-time'">
    <button type="button" class="flex h-9 flex-1 items-center justify-between rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm" (click)="toggle()">
      <span class="truncate text-xs text-foreground">{{ value }}</span>
      <svg viewBox="0 0 24 24" class="h-4 w-4 text-foreground" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
    </button>
    <div class="flex h-9 w-24 items-center rounded-md border border-input bg-transparent px-3 py-1 text-xs text-foreground shadow-sm">{{ time }}</div>
  </div>

  <div *ngIf="variant !== 'date-time'" class="flex flex-col gap-2">
    <button type="button" class="flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm" (click)="toggle()">
      <span class="truncate text-sm text-foreground">{{ variant === 'natural-language' ? naturalLanguageValue : value }}</span>
      <svg viewBox="0 0 24 24" class="h-4 w-4 text-foreground" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
    </button>

    <p *ngIf="variant === 'natural-language'" class="text-xs text-muted-foreground">{{ naturalLanguageHint }}</p>
  </div>

  <div *ngIf="open" class="w-full rounded-lg border border-border bg-background p-3 shadow-sm">
    <div class="mb-4 flex items-center justify-between">
      <button type="button" class="h-8 w-8 rounded-md text-foreground hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background">‹</button>
      <div class="flex items-center gap-1.5">
        <button type="button" class="inline-flex h-8 items-center gap-1 rounded-md border border-input px-2 text-sm font-medium text-foreground shadow-sm">{{ monthLabel }} <span>˅</span></button>
        <button type="button" class="inline-flex h-8 items-center gap-1 rounded-md border border-input px-2 text-sm font-medium text-foreground shadow-sm">{{ year }} <span>˅</span></button>
      </div>
      <button type="button" class="h-8 w-8 rounded-md text-foreground hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background">›</button>
    </div>

    <pdm-calendar [month]="month" [year]="year" [selectedDay]="selectedDay" mode="single"></pdm-calendar>

    <div *ngIf="variant === 'with-input' || variant === 'natural-language'" class="mt-3 flex gap-2">
      <button type="button" class="h-8 rounded-md border border-input px-3 text-xs text-foreground" (click)="selectPreset('Today')">Today</button>
      <button type="button" class="h-8 rounded-md border border-input px-3 text-xs text-foreground" (click)="selectPreset('Tomorrow')">Tomorrow</button>
    </div>
  </div>
</section>
