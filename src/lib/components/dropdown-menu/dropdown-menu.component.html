<div class="relative inline-block" [ngClass]="className">
  <button
    type="button"
    class="inline-flex h-9 appearance-none items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium text-foreground shadow-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
    [attr.aria-expanded]="open"
    (click)="toggle()"
  >
    {{ triggerText }}
  </button>

  <div
    *ngIf="open"
    [ngClass]="[
      'absolute left-0 top-full z-50 mt-2 min-w-32 overflow-hidden rounded-md border border-border bg-popover p-1 text-popover-foreground shadow-md',
      panelClassName
    ]"
  >
    <ng-container *ngFor="let item of resolvedItems">
      <div *ngIf="item.type === 'separator'" class="-mx-1 my-1 h-px bg-muted"></div>

      <div
        *ngIf="item.type === 'label'"
        [ngClass]="['px-2 py-1.5 text-sm font-semibold text-foreground', item.inset ? 'pl-8' : '']"
      >
        {{ item.label }}
      </div>

      <button
        *ngIf="!item.type || item.type === 'item'"
        type="button"
        [disabled]="item.disabled"
        [ngClass]="[
          'relative flex w-full appearance-none cursor-default select-none items-center gap-2 rounded-sm border-0 bg-transparent px-2 py-1.5 text-left text-sm text-foreground outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground disabled:pointer-events-none disabled:opacity-50',
          item.inset ? 'pl-8' : ''
        ]"
        (click)="select(item)"
      >
        <span class="inline-flex h-4 w-4 shrink-0 items-center justify-center">
          <svg
            *ngIf="item.checked"
            viewBox="0 0 24 24"
            class="h-3.5 w-3.5 text-foreground"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M5 12.5L9.2 16.7L19 7" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
          <span *ngIf="item.radioSelected" class="h-2 w-2 rounded-full bg-foreground"></span>
        </span>
        <span class="min-w-0 flex-1 truncate">{{ item.label }}</span>
        <span *ngIf="item.shortcut" class="text-xs text-muted-foreground">{{ item.shortcut }}</span>
        <span *ngIf="item.showChevron" class="text-sm text-muted-foreground">â€º</span>
      </button>
    </ng-container>
  </div>
</div>
