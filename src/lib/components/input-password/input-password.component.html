<div [ngClass]="['grid w-full gap-3', className]">
  <label *ngIf="label" [attr.for]="id" class="text-sm font-medium leading-none text-foreground">{{ label }}</label>
  <div class="relative">
    <input
      [id]="id"
      [type]="inputType"
      [value]="value"
      [placeholder]="placeholder"
      [disabled]="disabled"
      [readonly]="readonly"
      [required]="required"
      [attr.aria-invalid]="invalid"
      [ngClass]="[
        'border-input focus-visible:border-ring focus-visible:ring-2 focus-visible:ring-ring/50 aria-invalid:ring-2 aria-invalid:ring-destructive aria-invalid:border-destructive aria-invalid:placeholder:text-destructive/70 file:text-foreground placeholder:text-muted-foreground w-full min-w-0 rounded-lg border bg-transparent px-3 py-1 pr-10 text-sm shadow-sm transition-colors outline-none file:inline-flex file:h-6 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50',
        size === 'large' ? 'h-10 px-4 text-sm' : '',
        size === 'regular' ? 'h-9 px-3 text-sm' : '',
        size === 'small' ? 'h-8 px-2 text-sm' : '',
        size === 'mini' ? 'h-6 px-1.5 text-xs' : '',
        roundness === 'round' ? 'rounded-full' : 'rounded-lg',
        'text-foreground',
        inputClassName
      ]"
      (input)="onInput($event)"
      (blur)="onBlur($event)"
    />
    <button
      type="button"
      class="absolute right-2 top-1/2 inline-flex h-6 w-6 -translate-y-1/2 items-center justify-center rounded border-0 bg-transparent p-0 text-muted-foreground outline-none transition-colors hover:text-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-60"
      [disabled]="disabled"
      [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
      (click)="toggleVisibility()"
    >
      <svg
        *ngIf="!showPassword"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="h-4 w-4"
      >
        <path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"></path>
        <circle cx="12" cy="12" r="3"></circle>
      </svg>
      <svg
        *ngIf="showPassword"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="h-4 w-4"
      >
        <path d="M3 3l18 18"></path>
        <path d="M10.58 10.58a2 2 0 1 0 2.83 2.83"></path>
        <path d="M9.88 5.09A10.94 10.94 0 0 1 12 4.91c5.05 0 9.27 3.11 10.6 7.09a1 1 0 0 1 0 .64 11.9 11.9 0 0 1-1.84 3.2"></path>
        <path d="M6.61 6.61A11.81 11.81 0 0 0 1.4 12a1 1 0 0 0 0 .64 11.83 11.83 0 0 0 8.79 7.54"></path>
      </svg>
    </button>
  </div>
  <p *ngIf="!invalid && helperText" class="text-sm text-muted-foreground">{{ helperText }}</p>
  <p *ngIf="invalid && errorText" class="text-sm text-destructive">{{ errorText }}</p>
</div>
