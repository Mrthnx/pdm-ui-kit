<div
  [ngClass]="[
    'flex w-full items-center gap-2',
    disabled ? 'opacity-50' : '',
    className
  ]"
>
  <div
    [ngClass]="[
      'flex h-9 min-w-0 flex-1 items-center overflow-hidden rounded-[8px] border bg-[hsl(var(--background))] px-3 py-1 text-base leading-6 text-[hsl(var(--foreground))] shadow-sm transition-[border-color,box-shadow]',
      invalid ? 'border-[hsl(var(--destructive))]' : 'border-[hsl(var(--input))]',
      !invalid && !disabled ? 'focus-within:border-[hsl(var(--ring))] focus-within:shadow-[0_0_0_3px_hsl(var(--ring)/0.5)]' : '',
      invalid && !disabled ? 'focus-within:border-[hsl(var(--destructive))] focus-within:shadow-[0_0_0_3px_hsl(var(--destructive)/0.2)]' : '',
      disabled ? 'cursor-not-allowed' : ''
    ]"
  >
    <div
      *ngIf="prefixText || prefixIcon"
      class="inline-flex h-full shrink-0 items-center gap-2 pr-2 text-sm leading-5 text-[hsl(var(--muted-foreground))]"
    >
      <pdm-icon *ngIf="prefixIcon" [name]="prefixIcon" [size]="16"></pdm-icon>
      <span *ngIf="prefixText">{{ prefixText }}</span>
      <ng-content select="[pdmInputGroupPrefix]"></ng-content>
    </div>

    <input
      [id]="id"
      [type]="type"
      [value]="value"
      [placeholder]="placeholder"
      [disabled]="disabled"
      [attr.aria-invalid]="invalid"
      [ngClass]="[
        'h-full min-w-0 flex-1 border-0 bg-transparent p-0 text-base leading-6 text-[hsl(var(--foreground))] outline-none placeholder:text-[hsl(var(--muted-foreground))]',
        type === 'file' ? 'text-sm leading-5 file:mr-1 file:border-0 file:bg-transparent file:px-[6px] file:py-px file:text-sm file:font-medium file:leading-5 file:text-[hsl(var(--foreground))]' : ''
      ]"
      (input)="onInput($event)"
    />

    <div
      *ngIf="!buttonText && (suffixText || suffixIcon)"
      class="inline-flex h-full shrink-0 items-center gap-2 pl-2 text-sm leading-5 text-[hsl(var(--muted-foreground))]"
    >
      <pdm-icon *ngIf="suffixIcon" [name]="suffixIcon" [size]="16"></pdm-icon>
      <span *ngIf="suffixText" class="font-medium">{{ suffixText }}</span>
      <ng-content select="[pdmInputGroupSuffix]"></ng-content>
    </div>
  </div>

  <button
    *ngIf="buttonText"
    type="button"
    [disabled]="disabled"
    class="inline-flex h-9 shrink-0 items-center justify-center rounded-[10px] border border-[hsl(var(--input))] bg-[hsl(var(--background))] px-4 py-2 text-sm font-medium leading-5 text-[hsl(var(--foreground))] shadow-sm outline-none transition-[border-color,box-shadow] focus:outline-none focus-visible:outline-none disabled:cursor-not-allowed"
    (click)="onButtonClick($event)"
  >
    {{ buttonText }}
  </button>
</div>
