<section [ngClass]="['w-full rounded-lg border border-border bg-card text-card-foreground', className]">
  <div class="flex w-full items-stretch border-b border-border">
    <div class="flex min-w-0 flex-1 flex-col gap-1 px-6 pb-3 pt-4">
      <h3 class="m-0 text-sm font-semibold leading-none tracking-tight">{{ title }}</h3>
      <p class="m-0 text-sm text-muted-foreground">{{ description }}</p>
    </div>

    <div class="flex h-24">
      <div class="flex h-full w-44 flex-col justify-center border-l border-border bg-muted px-6 py-4">
        <span class="text-xs text-muted-foreground">{{ desktopLabel }}</span>
        <span class="mt-1 text-2xl font-semibold">{{ desktopValue }}</span>
      </div>
      <div class="flex h-full w-44 flex-col justify-center px-6 py-4">
        <span class="text-xs text-muted-foreground">{{ mobileLabel }}</span>
        <span class="mt-1 text-2xl font-semibold">{{ mobileValue }}</span>
      </div>
    </div>
  </div>

  <div class="w-full p-6">
    <ng-container [ngSwitch]="type">
      <div *ngSwitchCase="'bar'" class="flex h-60 w-full flex-col justify-end gap-2">
        <div class="relative h-48 w-full overflow-hidden">
          <div class="absolute bottom-0 left-0 right-0 border-t border-border opacity-50"></div>
          <div class="absolute left-0 right-0 top-1/4 border-t border-border opacity-50"></div>
          <div class="absolute left-0 right-0 top-1/2 border-t border-border opacity-50"></div>
          <div class="absolute left-0 right-0 top-3/4 border-t border-border opacity-50"></div>
          <div class="absolute inset-x-0 bottom-0 flex h-48 items-end gap-0.5 px-0.5">
            <div *ngFor="let bar of normalizedBars" class="w-1.5 rounded-sm bg-primary" [style.height.px]="bar"></div>
          </div>
        </div>
        <div class="flex h-4 w-full items-center justify-between gap-2">
          <span *ngFor="let label of labels" class="truncate text-xs text-muted-foreground">{{ label }}</span>
        </div>
      </div>

      <div *ngSwitchCase="'line'" class="flex h-60 w-full flex-col gap-2">
        <svg viewBox="0 0 320 180" class="h-48 w-full">
          <line x1="0" y1="180" x2="320" y2="180" stroke="hsl(var(--border))" stroke-width="1"></line>
          <line x1="0" y1="135" x2="320" y2="135" stroke="hsl(var(--border))" stroke-width="1" opacity="0.5"></line>
          <line x1="0" y1="90" x2="320" y2="90" stroke="hsl(var(--border))" stroke-width="1" opacity="0.5"></line>
          <line x1="0" y1="45" x2="320" y2="45" stroke="hsl(var(--border))" stroke-width="1" opacity="0.5"></line>
          <path [attr.d]="linePath" fill="none" stroke="hsl(var(--primary))" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
        <div class="flex h-4 w-full items-center justify-between gap-2">
          <span *ngFor="let label of labels" class="truncate text-xs text-muted-foreground">{{ label }}</span>
        </div>
      </div>

      <div *ngSwitchCase="'area'" class="flex h-60 w-full flex-col gap-2">
        <svg viewBox="0 0 320 180" class="h-48 w-full">
          <defs>
            <linearGradient id="pdm-chart-area-gradient" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(var(--primary))" stop-opacity="0.35"></stop>
              <stop offset="100%" stop-color="hsl(var(--primary))" stop-opacity="0.02"></stop>
            </linearGradient>
          </defs>
          <line x1="0" y1="180" x2="320" y2="180" stroke="hsl(var(--border))" stroke-width="1"></line>
          <line x1="0" y1="135" x2="320" y2="135" stroke="hsl(var(--border))" stroke-width="1" opacity="0.5"></line>
          <line x1="0" y1="90" x2="320" y2="90" stroke="hsl(var(--border))" stroke-width="1" opacity="0.5"></line>
          <line x1="0" y1="45" x2="320" y2="45" stroke="hsl(var(--border))" stroke-width="1" opacity="0.5"></line>
          <path [attr.d]="areaPath" fill="url(#pdm-chart-area-gradient)"></path>
          <path [attr.d]="linePath" fill="none" stroke="hsl(var(--primary))" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
        <div class="flex h-4 w-full items-center justify-between gap-2">
          <span *ngFor="let label of labels" class="truncate text-xs text-muted-foreground">{{ label }}</span>
        </div>
      </div>

      <div *ngSwitchCase="'pie'" class="flex items-center gap-6">
        <div class="relative h-40 w-40 rounded-full" [style.background]="pieGradient">
          <div class="absolute inset-7 rounded-full bg-card"></div>
        </div>
        <div class="grid flex-1 gap-2">
          <div *ngFor="let segment of pieSegments" class="flex items-center justify-between rounded-md border border-border px-3 py-2">
            <div class="flex items-center gap-2">
              <span class="size-2.5 rounded-full" [style.background]="segment.color"></span>
              <span class="text-sm">{{ segment.label }}</span>
            </div>
            <span class="text-sm font-medium">{{ segment.size | number: '1.0-0' }}%</span>
          </div>
        </div>
      </div>

      <div *ngSwitchCase="'radar'" class="flex items-center gap-6">
        <svg viewBox="0 0 160 160" class="h-44 w-44">
          <polygon points="80,8 144,44 144,116 80,152 16,116 16,44" fill="none" stroke="hsl(var(--border))"></polygon>
          <polygon points="80,28 126,54 126,106 80,132 34,106 34,54" fill="none" stroke="hsl(var(--border))" opacity="0.75"></polygon>
          <polygon points="80,48 109,64 109,96 80,112 51,96 51,64" fill="none" stroke="hsl(var(--border))" opacity="0.55"></polygon>
          <polygon [attr.points]="radarPoints" fill="hsl(var(--primary))" fill-opacity="0.22" stroke="hsl(var(--primary))" stroke-width="2"></polygon>
        </svg>
        <div class="grid flex-1 gap-2">
          <div *ngFor="let item of radar; index as i" class="flex items-center justify-between rounded-md border border-border px-3 py-2 text-sm">
            <span class="text-muted-foreground">Metric {{ i + 1 }}</span>
            <span class="font-medium">{{ item }}</span>
          </div>
        </div>
      </div>

      <div *ngSwitchCase="'radial'" class="flex items-center justify-between gap-6">
        <div class="relative flex size-44 items-center justify-center">
          <svg viewBox="0 0 96 96" class="size-40 -rotate-90">
            <circle cx="48" cy="48" r="42" fill="none" stroke="hsl(var(--muted))" stroke-width="10"></circle>
            <circle
              cx="48"
              cy="48"
              r="42"
              fill="none"
              stroke="hsl(var(--primary))"
              stroke-width="10"
              stroke-linecap="round"
              stroke-dasharray="263.89"
              [attr.stroke-dashoffset]="radialStrokeOffset"
            ></circle>
          </svg>
          <div class="absolute text-center">
            <div class="text-2xl font-semibold">{{ radialValue }}%</div>
            <div class="text-xs text-muted-foreground">{{ radialLabel }}</div>
          </div>
        </div>
        <div class="flex-1">
          <p class="m-0 text-sm font-medium">{{ radialLabel }}</p>
          <p class="m-0 mt-1 text-sm text-muted-foreground">{{ radialDescription }}</p>
        </div>
      </div>

      <div *ngSwitchCase="'tooltips'" class="grid gap-3">
        <div class="inline-flex w-fit min-w-56 flex-col gap-2 rounded-lg border border-border bg-card p-3 shadow-sm">
          <p class="m-0 text-xs font-medium text-muted-foreground">{{ tooltipTitle }}</p>
          <div class="flex items-center justify-between text-sm">
            <span>{{ tooltipPrimaryLabel }}</span>
            <span class="font-semibold">{{ tooltipPrimaryValue }}</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <span>{{ tooltipSecondaryLabel }}</span>
            <span class="font-semibold">{{ tooltipSecondaryValue }}</span>
          </div>
        </div>
        <p class="m-0 text-xs text-muted-foreground">Tooltip style preparado para charts de línea, área y barras.</p>
      </div>
    </ng-container>
  </div>
</section>
